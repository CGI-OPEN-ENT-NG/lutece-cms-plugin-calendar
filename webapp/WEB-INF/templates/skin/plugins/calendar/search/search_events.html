<#include "/admin/util/calendar/calendar.html" />

<#-- Number of items per page selector - Radio List implementation -->
<#macro NbItemsPerPageSelectorRadioList nb_items_per_page>
	<#list [ "5" , "10" , "20" , "50" ] as nb>
	<#if nb = nb_items_per_page > 
	<input value="${nb}" id="items_per_page${nb}" name="items_per_page" class="radio" type="radio" checked /><label for="items_per_page${nb}">${nb}</label>
	<#else>
	<input value="${nb}" id="items_per_page${nb}" name="items_per_page" class="radio" type="radio" /><label for="items_per_page${nb}">${nb}</label>
	</#if>
	</#list>
</#macro>

<#escape x as x?html>

<div class="content-box" >
	
	<div class="portlet -lutece-border-radius calendar-left-content-search">
	
    <h2>#i18n{calendar.search.event.title }</h2>
		       
    <form method="post" name="search_event" action="jsp/site/Portal.jsp">		
        <p>
            <label for="event_search">#i18n{calendar.search.event.label.search}</label>
            <input type="text" id="event_search" name="query" size="60" maxlength="120" />
            
        </p>
        <p>
            <label for="event_search_calendar">#i18n{calendar.search.event.label.calendar_choice} :</label>           
			<table>
				<#assign rowTab = 0>		
		       	<#list calendar_list as agenda >
		        <#if rowTab = 0>
			    	<tr>
		        </#if>
		           <td><input class="checkbox" type="checkbox" name="calendar_id" <#if agenda.isChecked()> checked="checked"</#if> value="${agenda.code}" />
		           ${agenda.name}&nbsp;
		           </td>
		        <#if rowTab == 0>
		       		<#assign rowTab = 1>
		      		<#else>
			        </tr>
					<#assign rowTab = 0>
		        </#if>
		       </#list>
		       <#if rowTab = 1>
		        <tr>
		       </#if>
		    </table>
        </p>
        
        <p>
       		<label for="event_category">#i18n{calendar.create_event.category} :</label>
			<table>
				<#assign rowTab = 0>		
		       	<#list category_list as category >
		        <#if rowTab = 0>
			    	<tr>
		        </#if>
		           <td><input class="checkbox" type="checkbox" name="category" <#if category.isChecked()> checked="checked"</#if> value="${category.code}" />
		          	${category.name}&nbsp;
		           </td>
		        <#if rowTab == 0>
		       		<#assign rowTab = 1>
		      		<#else>
			        </tr>
					<#assign rowTab = 0>
		        </#if>
		       </#list>
		       <#if rowTab = 1>
		        <tr>
		       </#if>
		    </table>
        </p>
        
        <p>
            <label for="event_search_ratio">#i18n{calendar.search.event.label.criteria}</label><br/>
            <input type="radio" class="radio" name="period" value="0" id="radio_0" checked="checked" onclick="disableDate()" />#i18n{calendar.search.event.label.period_none}<br/>
            <input type="radio" class="radio" name="period" value="1" id="radio_1" onclick="disableDate()"/>#i18n{calendar.search.event.label.period_today}<br/>
           	<input type="radio" class="radio" name="period" value="2" id="radio_2" onclick="disableDate()"/>#i18n{calendar.search.event.label.period_week}<br/>
           	<input type="radio" class="radio" name="period" value="3" id="radio_3" onclick="enableDate()" />#i18n{calendar.search.event.label.period_range}<br/>
                                                
        </p>      

        <p>
        	<label for="event_date_begin">#i18n{calendar.search.event.label.datebegin}</label>
           	<input type="text" id="date_start" name="date_start" size="10" maxlength="10" disabled="disabled" class="disabled-date" />		
	        <input type="button" class="button" type="reset" id="button_date" value="..." disabled="disabled"  />
        </p>  
        
        <p>
        	<label for="event_date_end">#i18n{calendar.search.event.label.dateend}</label>
           	<input type="text" id="date_end" name="date_end" size="10" maxlength="10" disabled="disabled" class="disabled-date" />		
	        <input type="button" class="button" type="reset" id="button_end" value="..." disabled="disabled"/>
        </p> 
        
        <div>
			<#-- Number of documents per page selector -->
			#i18n{portal.search.search_results.labelNbDocsPerPage}<br />
			<@NbItemsPerPageSelectorRadioList nb_items_per_page />
		</div>
		
        <br/>
        
        <p>      
            <input type="submit" value="#i18n{calendar.search.event.button.search}" tabindex="10" class="button" />
        </p>
        
        <input type="hidden" name="page" value="calendar" /> 
        <input type="hidden" name="action" value="do_search" /> 

    </form>
    </div>
</div>

</#escape>

<!-- main calendar program -->
<script type="text/javascript" src="js/jscalendar/calendar.js"></script>

<!-- language for the calendar -->
<script type="text/javascript" src="js/jscalendar/lang/calendar-${locale}.js"></script>

<!-- the following script defines the Calendar.setup helper function, which makes
     adding a calendar a matter of 1 or 2 lines of code. -->
<script type="text/javascript" src="js/jscalendar/calendar-setup.js"></script>

<script type="text/javascript">

	function enableDate( ){	
	document.getElementById('date_start').disabled = false;
	document.getElementById('date_end').disabled = false;
	document.getElementById('button_date').disabled = false;
	document.getElementById('button_end').disabled = false;
	
	document.getElementById('date_start').className="enabled-date"
	document.getElementById('date_end').className="enabled-date"		
	}

	function disableDate( ){	
	document.getElementById('date_start').disabled = true;
	document.getElementById('date_end').disabled = true;
	document.getElementById('button_date').disabled = true;
	document.getElementById('button_end').disabled = true;
	
	document.getElementById('date_start').className="disabled-date"
	document.getElementById('date_end').className="disabled-date"
	}
</script>
<@getDatePickerRange idFieldFrom="date_start" idFieldTo="date_end" language=locale />